<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RapChef - Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="nav">
        <div class="container nav__inner">
            <a href="index.html" class="nav__logo">
                <img src="logotipo-rapchef.jpg" alt="RapChef">
            </a>
            <button class="nav__toggle" id="mobileMenuToggle" aria-expanded="false" aria-controls="navLinks">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav__links" id="navLinks">
                <li><a href="index.html" class="is-active">Home</a></li>
                <li><a href="cardapio.html">Card√°pio</a></li>
                <li><a href="estoque.html">Estoque</a></li>
                <li><a href="ajuda.html">Ajuda</a></li>
                <li><a href="peca-sua-geladeira.html">Pe√ßa a sua geladeira</a></li>
            </ul>
        </div>
    </header>

    <main>
        <section class="hero hero--video">
            <video class="hero-video" src="VideoHome.mp4" autoplay muted loop playsinline poster="logotipo-rapchef.jpg">
                <source src="VideoHome.mp4" type="video/mp4">
            </video>
            <div class="hero-overlay"></div>
            <div class="hero__content">
                <span class="hero__eyebrow">Geladeiras Inteligentes</span>
                <h1 class="hero__title">Alimenta√ß√£o 24/7 em Comodato</h1>
                <p class="hero__subtitle">Refei√ß√µes caseiras prontas na sua geladeira inteligente, 24 horas por dia, sem esfor√ßo.</p>
                <div class="hero__actions">
                    <a href="peca-sua-geladeira.html" class="btn btn-primary">Pe√ßa sua Geladeira</a>
                    <a href="https://wa.me/5511947223641" target="_blank" rel="noopener noreferrer" class="btn btn-ghost">Fale no WhatsApp</a>
                </div>
            </div>
        </section>

        <section class="section section--compact">
            <div class="container food-strip">
                <div class="food-strip__header">
                    <span class="hero__eyebrow">Passe para provar</span>
                    <h2 class="section__title section__title--left">Sabores em destaque</h2>
                </div>
                <div class="food-strip__rail" id="foodStripRail" aria-label="Pratos RapChef"></div>
                <div class="food-strip__nav">
                    <button class="food-strip__btn" id="foodStripPrev" aria-label="Ver anterior">‚Äπ</button>
                    <button class="food-strip__btn" id="foodStripNext" aria-label="Ver pr√≥ximo">‚Ä∫</button>
                </div>
            </div>
        </section>

        <section class="section section--compact">
            <div class="container credibility">
                <div class="credibility__cards">
                    <article class="credibility__card">
                        <div class="credibility__title">Variedade</div>
                        <div class="credibility__text">Mais de 35 refei√ß√µes caseiras.</div>
                    </article>
                    <article class="credibility__card">
                        <div class="credibility__title">Opera√ß√£o completa</div>
                        <div class="credibility__text">Abastecimento, log√≠stica e gest√£o pela RapChef.</div>
                    </article>
                    <article class="credibility__card">
                        <div class="credibility__title">Custo zero</div>
                        <div class="credibility__text">Sem custo operacional para empresas ou condom√≠nios.</div>
                    </article>
                    <article class="credibility__card">
                        <div class="credibility__title">Nosso equipamento</div>
                        <div class="credibility__text">Freezer RapChef com trava e libera√ß√£o via pagamento.</div>
                    </article>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="cta">
                    <h2 class="section__title">Quer refei√ß√µes prontas e sem opera√ß√£o?</h2>
                    <div class="hero__actions">
                        <a href="peca-sua-geladeira.html" class="btn btn-primary">Pe√ßa sua Geladeira</a>
                        <a href="https://wa.me/5511947223641" target="_blank" rel="noopener noreferrer" class="btn btn-ghost">Fale no WhatsApp</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container footer__grid">
            <div class="footer__brand">
                <h3>RapChef</h3>
                <p>Autonomia, sabor e cuidado em cada refei√ß√£o para empresas e condom√≠nios.</p>
            </div>
            <div class="footer__links">
                <strong>Explore</strong>
                <a href="index.html">Home</a>
                <a href="cardapio.html">Card√°pio</a>
                <a href="estoque.html">Estoque</a>
                <a href="ajuda.html">Ajuda</a>
                <a href="peca-sua-geladeira.html">Pe√ßa a sua geladeira</a>
            </div>
            <div class="footer__links footer__contact">
                <strong>Contato</strong>
                <a href="mailto:michael.mm@rapchef.com.br">üìß michael.mm@rapchef.com.br</a>
                <a href="https://wa.me/5511947223641" target="_blank" rel="noopener noreferrer">üì± +55 11 94722-3641</a>
            </div>
            <div class="footer__legal">
                &copy; 2024 RapChef. Todos os direitos reservados.
            </div>
        </div>
    </footer>

    <script>
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        const foodStripRail = document.getElementById('foodStripRail');
        const foodStripPrev = document.getElementById('foodStripPrev');
        const foodStripNext = document.getElementById('foodStripNext');

        if (mobileMenuToggle && navLinks) {
            mobileMenuToggle.addEventListener('click', () => {
                const expanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
                mobileMenuToggle.setAttribute('aria-expanded', String(!expanded));
                navLinks.classList.toggle('is-open');
            });
        }

        (function setupFoodStrip() {
            if (!foodStripRail) return;

            const candidateDataUrls = [
                'marmitas nomeadas/marmitas.json',
                'marmitas-nomeadas/marmitas.json',
                'marmitas_nomeadas/marmitas.json',
                'marmitas/marmitas.json',
                './marmitas nomeadas/marmitas.json',
                './marmitas-nomeadas/marmitas.json'
            ];

            async function fetchFirstAvailable(urls) {
                for (const raw of urls) {
                    try {
                        const res = await fetch(encodeURI(raw));
                        if (!res.ok) continue;
                        const json = await res.json();
                        if (Array.isArray(json) && json.length) return json;
                    } catch (_) {}
                }
                return [];
            }

            function buildImage(src, alt, fallbacks) {
                const figure = document.createElement('figure');
                figure.className = 'food-strip__item';
                const img = document.createElement('img');
                img.src = src;
                img.alt = alt || 'Prato RapChef';
                img.loading = 'lazy';
                let attempt = 0;
                img.onerror = () => {
                    attempt += 1;
                    if (fallbacks && attempt < fallbacks.length) {
                        img.src = fallbacks[attempt];
                    }
                };
                figure.appendChild(img);
                return figure;
            }

            function populate(list) {
                foodStripRail.innerHTML = '';
                list.forEach(item => {
                    const name = item.name || item.nome || 'Prato RapChef';
                    const file = item.image || item.imagem || '';
                    const basename = (file || '').split('/').pop() || '';
                    const slug = basename
                        .toLowerCase()
                        .replace(/\s+/g, '-')
                        .replace(/[,]+/g, '-')
                        .replace(/_{2,}/g, '_');

                    const tryPaths = [
                        `marmitas nomeadas/${basename}`,
                        `marmitas nomeadas/${slug}`,
                        `marmitas-nomeadas/${basename}`,
                        `marmitas-nomeadas/${slug}`,
                        `marmitas/${basename}`,
                        `marmitas/${slug}`,
                        basename,
                        slug,
                        file
                    ].filter(Boolean);

                    const encoded = tryPaths.map(p => encodeURI(p));
                    const unique = encoded.filter((v, i) => encoded.indexOf(v) === i);
                    if (unique.length) {
                        const imgEl = buildImage(unique[0], name, unique);
                        foodStripRail.appendChild(imgEl);
                    }
                });
            }

            fetchFirstAvailable(candidateDataUrls).then(json => {
                if (!json.length) return;
                populate(json.slice(0, 20));
            });

            function scrollByDir(dir) {
                const distance = foodStripRail.offsetWidth * 0.6;
                foodStripRail.scrollBy({ left: dir * distance, behavior: 'smooth' });
            }

            if (foodStripPrev) {
                foodStripPrev.addEventListener('click', () => scrollByDir(-1));
            }
            if (foodStripNext) {
                foodStripNext.addEventListener('click', () => scrollByDir(1));
            }
        })();
    </script>
</body>
</html>
